<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>OpSum · ITensorMPS.jl</title><meta name="title" content="OpSum · ITensorMPS.jl"/><meta property="og:title" content="OpSum · ITensorMPS.jl"/><meta property="twitter:title" content="OpSum · ITensorMPS.jl"/><meta name="description" content="Documentation for ITensorMPS.jl."/><meta property="og:description" content="Documentation for ITensorMPS.jl."/><meta property="twitter:description" content="Documentation for ITensorMPS.jl."/><meta property="og:url" content="https://itensor.github.io/ITensorMPS.jl/OpSum.html"/><meta property="twitter:url" content="https://itensor.github.io/ITensorMPS.jl/OpSum.html"/><link rel="canonical" href="https://itensor.github.io/ITensorMPS.jl/OpSum.html"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="assets/extras.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.png" alt="ITensorMPS.jl logo"/><img class="docs-dark-only" src="assets/logo-dark.png" alt="ITensorMPS.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">ITensorMPS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/DMRG.html">DMRG</a></li><li><a class="tocitem" href="tutorials/QN_DMRG.html">Quantum Number Conserving DMRG</a></li><li><a class="tocitem" href="tutorials/MPSTimeEvolution.html">MPS Time Evolution</a></li></ul></li><li><span class="tocitem">Code Examples</span><ul><li><a class="tocitem" href="examples/MPSandMPO.html">MPS and MPO Examples</a></li><li><a class="tocitem" href="examples/DMRG.html">DMRG Examples</a></li><li><a class="tocitem" href="examples/Physics.html">Physics (SiteType) System Examples</a></li></ul></li><li><span class="tocitem">Documentation</span><ul><li><a class="tocitem" href="MPSandMPO.html">MPS and MPO</a></li><li><a class="tocitem" href="SiteType.html">SiteType and op, state, val functions</a></li><li><a class="tocitem" href="IncludedSiteTypes.html">SiteTypes Included with ITensor</a></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">DMRG</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="DMRG.html">DMRG</a></li><li><a class="tocitem" href="Sweeps.html">Sweeps</a></li><li><a class="tocitem" href="ProjMPO.html">ProjMPO</a></li><li><a class="tocitem" href="ProjMPOSum.html">ProjMPOSum</a></li><li><a class="tocitem" href="Observer.html">Observer System for DMRG</a></li><li><a class="tocitem" href="DMRGObserver.html">DMRGObserver</a></li></ul></li><li class="is-active"><a class="tocitem" href="OpSum.html">OpSum</a><ul class="internal"><li><a class="tocitem" href="#Description"><span>Description</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li></ul></li><li><span class="tocitem">Frequently Asked Questions</span><ul><li><a class="tocitem" href="faq/DMRG.html">DMRG FAQs</a></li><li><a class="tocitem" href="faq/QN.html">Quantum Number (QN) FAQs</a></li></ul></li><li><a class="tocitem" href="HDF5FileFormats.html">HDF5 File Formats</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Documentation</a></li><li class="is-active"><a href="OpSum.html">OpSum</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="OpSum.html">OpSum</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ITensor/ITensorMPS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ITensor/ITensorMPS.jl/blob/main/docs/src/OpSum.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="OpSum"><a class="docs-heading-anchor" href="#OpSum">OpSum</a><a id="OpSum-1"></a><a class="docs-heading-anchor-permalink" href="#OpSum" title="Permalink"></a></h1><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ITensors.Ops.OpSum" href="#ITensors.Ops.OpSum"><code>ITensors.Ops.OpSum</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An <code>OpSum</code> represents a sum of operator terms.</p><p>Often it is used to create matrix product operator (<code>MPO</code>) approximation of the sum of the terms in the <code>OpSum</code> oject. Each term is a product of local operators specified by names such as <code>&quot;Sz&quot;</code> or <code>&quot;N&quot;</code>, times an optional coefficient which can be real or complex.</p><p>Which local operator names are available is determined by the function <code>op</code> associated with the <code>TagType</code> defined by special Index tags, such as <code>&quot;S=1/2&quot;</code>, <code>&quot;S=1&quot;</code>, <code>&quot;Fermion&quot;</code>, and <code>&quot;Electron&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ITensor/ITensors.jl/blob/v0.9.2/src/lib/Ops/src/op.jl#L163-L180">source</a></section></article><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ITensorMPS.add!" href="#ITensorMPS.add!"><code>ITensorMPS.add!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add!(opsum::OpSum,
     op1::String, i1::Int)

add!(opsum::OpSum,
     coef::Number,
     op1::String, i1::Int)

add!(opsum::OpSum,
     op1::String, i1::Int,
     op2::String, i2::Int,
     ops...)

add!(opsum::OpSum,
     coef::Number,
     op1::String, i1::Int,
     op2::String, i2::Int,
     ops...)

+(opsum:OpSum, term::Tuple)</code></pre><p>Add a single- or multi-site operator term to the OpSum <code>opsum</code>. Each operator is specified by a name (String) and a site number (Int). The second version accepts a real or complex coefficient.</p><p>The <code>+</code> operator version of this function accepts a tuple with entries either (String,Int,String,Int,...) or (Number,String,Int,String,Int,...) where these tuple values are the same as valid inputs to the <code>add!</code> function. For inputting a very large number of terms (tuples) to an OpSum, consider using the broadcasted operator <code>.+=</code> which avoids reallocating the OpSum after each addition.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">opsum = OpSum()

add!(opsum,&quot;Sz&quot;,2,&quot;Sz&quot;,3)

opsum += (&quot;Sz&quot;,3,&quot;Sz&quot;,4)

opsum += (0.5,&quot;S+&quot;,4,&quot;S-&quot;,5)

opsum .+= (0.5,&quot;S+&quot;,5,&quot;S-&quot;,6)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ITensor/ITensorMPS.jl/blob/766fce3d23aa07b151a55d57b746ffe0867135ce/src/opsum_to_mpo/opsum_to_mpo_generic.jl#L8-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ITensorMPS.MPO-Tuple{ITensors.LazyApply.Applied{typeof(sum), Tuple{Array{ITensors.LazyApply.Applied{typeof(*), Tuple{C, Prod{Op}}, @NamedTuple{}}, 1}}, @NamedTuple{}} where C, Vector{&lt;:Index}}" href="#ITensorMPS.MPO-Tuple{ITensors.LazyApply.Applied{typeof(sum), Tuple{Array{ITensors.LazyApply.Applied{typeof(*), Tuple{C, Prod{Op}}, @NamedTuple{}}, 1}}, @NamedTuple{}} where C, Vector{&lt;:Index}}"><code>ITensorMPS.MPO</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MPO(os::OpSum, sites::Vector{&lt;:Index}; splitblocks=true, kwargs...)
MPO(eltype::Type{&lt;:Number}, os::OpSum, sites::Vector{&lt;:Index}; splitblocks=true, kwargs...)</code></pre><p>Convert an OpSum object <code>os</code> to an MPO, with indices given by <code>sites</code>. The resulting MPO will have the indices <code>sites[1], sites[1]&#39;, sites[2], sites[2]&#39;</code> etc. The conversion is done by an algorithm that compresses the MPO resulting from adding the OpSum terms together, often achieving the minimum possible bond dimension.</p><p>Optionally specify the desired element type of the output MPO by passing the type as the first argument.</p><p>The keyword argument <code>splitblocks</code> controls the sparsity of the resulting MPO. With the default <code>splitblocks=true</code>, the link indices of the MPO are split into blocks of dimension 1, potentially making the MPO more sparse.</p><p>With the <code>splitblocks=false</code>, the blocks of the link dimensions are packed as much as possible according to common quantum numbers, making larger blocks. Before ITensors 0.3.19, this was the default output, but we have found that in general MPOs output with <code>splitblocks=true</code> lead to better performance in algorithms like DMRG.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">os = OpSum()
os += &quot;Sz&quot;,1,&quot;Sz&quot;,2
os += &quot;Sz&quot;,2,&quot;Sz&quot;,3
os += &quot;Sz&quot;,3,&quot;Sz&quot;,4

sites = siteinds(&quot;S=1/2&quot;,4)
H = MPO(os,sites)
H = MPO(Float32,os,sites)
H = MPO(os,sites; splitblocks=false)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ITensor/ITensorMPS.jl/blob/766fce3d23aa07b151a55d57b746ffe0867135ce/src/opsum_to_mpo/opsum_to_mpo_generic.jl#L244-L289">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="DMRGObserver.html">« DMRGObserver</a><a class="docs-footer-nextpage" href="faq/DMRG.html">DMRG FAQs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Friday 11 April 2025 03:48">Friday 11 April 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
